<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>MaxMemTest</title>
    </head>
    <body>
        <div>This site will crash after pushing Start. <br>Please open the developer tool on your browser before pushing Start.</div>
        <input id="start" type="button" value="Start" />
        <div id="msg"></div>
    </body>
    <script>
        const maxIdx = 100000
    
        var memTest = {
            init: function() {
                this.bindEvents();
            },
            bindEvents: function() {
                document.getElementById('start').addEventListener('click', this.startTest);
            },
            startTest: function() {
                var test = new Test();
                for(var i=1; i<maxIdx; i++) {
                    test.addTest(i);
                }
            }
        };
        memTest.init();

        class Test {
            constructor() {
                this.tests = new Array();
                this.msg = document.getElementById('msg');
            }
            addTest(l) {
                const arr = new Array(l);
                arr.fill("a");
                this.tests[l-1] = arr;
                const txt = `loop test: ${l} / ${maxIdx}`;
                console.log(txt);
                this.msg.innerHTML = txt;
            }
        }
    </script>
</html>